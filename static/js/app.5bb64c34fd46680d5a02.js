webpackJsonp([1],{LymF:function(e,t){},NHnr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("/5sW"),r=a("u2KI"),s=a.n(r),i={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"intro-page"},[t("img",{staticClass:"intro-page__image responsive-image",attrs:{srcset:"static/images/StartGame.png 501w, static/images/StartGame@2x.png 1002w",sizes:"40vw",src:"static/images/StartGame.png",alt:"картинка из четырёх карт, три из которых показаны рубашкой"}}),this._v(" "),t("h1",{staticClass:"intro-page__header header"},[this._v("Memory game")]),this._v(" "),t("button",{staticClass:"intro-page__button-new-game button",attrs:{"data-tid":"NewGame-startGame"},on:{click:this.onButtonNewGameClick}},[this._v("\n    Начать игру\n  ")])])},staticRenderFns:[]};var o=a("VU/8")({name:"intro-page",props:["moveToGamePage"],methods:{onButtonNewGameClick:function(e){e.target.blur(),this.moveToGamePage()}}},i,!1,function(e){a("fN7u")},"data-v-849eb3ec",null).exports,c=a("Xxa5"),d=a.n(c),u=a("BO1k"),l=a.n(u),m=a("exGp"),p=a.n(m),f=a("//Fk"),g=a.n(f),v={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"menu"},[a("button",{staticClass:"menu__button-new-game",attrs:{"data-tid":"Menu-newGame"},on:{click:e.onButtonNewGameClick}},[e._v("\n    Начать заново\n  ")]),e._v(" "),a("span",{staticClass:"menu__scores-title"},[e._v("Очки:")]),e._v(" "),a("span",{staticClass:"menu__scores-value",attrs:{"data-tid":"Menu-scores"}},[e._v(e._s(e.score))])])},staticRenderFns:[]};var h=a("VU/8")({name:"game-page-menu",props:["score","onButtonNewGameClick"]},v,!1,function(e){a("LymF")},"data-v-7908efd8",null).exports,_=a("Zrlr"),C=a.n(_),w=a("wxAW"),k=a.n(w),y=a("Gu7T"),b=a.n(y),x=a("8r4o"),G=a.n(x),E=a("Jrax"),P=a.n(E),R=3,A=6;var F=function(){var e=G()(2,10).map(function(e){return e.toString()}),t=["0"].concat(b()(e),["A","J","K","Q"]),a=[],n=!0,r=!1,s=void 0;try{for(var i,o=l()(["C","D","H","S"]);!(n=(i=o.next()).done);n=!0){var c=i.value,d=!0,u=!1,m=void 0;try{for(var p,f=l()(t);!(d=(p=f.next()).done);d=!0){var g=p.value;a.push(g+c)}}catch(e){u=!0,m=e}finally{try{!d&&f.return&&f.return()}finally{if(u)throw m}}}}catch(e){r=!0,s=e}finally{try{!n&&o.return&&o.return()}finally{if(r)throw s}}return a}(),T=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:A;if(C()(this,e),t*a%2!=0)throw new Error("Число карт на поле должно быть чётно");var n=t*a/2;if(n>F.length)throw new Error("Размер поля слишком большой. Не получится сделать так, чтобы у каждой карты была ровно одна пара");var r=P()(F).slice(0,n);this.cards=P()([].concat(b()(r),b()(r))),this.height=t,this.width=a,this.numberPairsAssociated=0,this.score=0}return k()(e,[{key:"flipPair",value:function(e,t){if(this.cards[e]===this.cards[t]){++this.numberPairsAssociated;var a=this.cards.length/2-this.numberPairsAssociated;return this.score+=42*a,!0}return this.score-=42*this.numberPairsAssociated,!1}},{key:"isGameEnd",value:function(){return this.numberPairsAssociated===this.cards.length/2}}]),e}(),N={name:"game-page-cards",props:["cards","onCardClick"],mounted:function(){document.addEventListener("keydown",this.onKeydown)},beforeDestroy:function(){document.removeEventListener("keydown",this.onKeydown)},methods:{onMousedown:function(e){e.preventDefault()},onKeydown:function(e){(!document.activeElement||document.activeElement===document.body&&e.key.startsWith("Arrow"))&&this.focusCard(0)},moveCardFocus:function(e,t,a){var n=Math.floor(e.index/A)+t,r=e.index%A+a;if(0<=n&&n<R&&0<=r&&r<A){var s=n*A+r;this.focusCard(s)}},focusCard:function(e){this.$refs.cards.children[e].firstElementChild.focus()},blurActiveCard:function(){document.activeElement.blur()}}},$={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{ref:"cards",staticClass:"cards",attrs:{"data-tid":"Deck"}},e._l(e.cards,function(t){return a("div",{key:t.index,class:["cards__card card",{card_flipped:t.flipped,card_associated:t.associated}],attrs:{"data-tid":t.flipped?"Card-flipped":t.associated?null:"Card"},on:{mousedown:e.onMousedown,click:function(a){e.onCardClick(t)},keydown:[function(t){return"button"in t||!e._k(t.keyCode,"esc",27,t.key,"Escape")?e.blurActiveCard(t):null},function(a){if(!("button"in a)&&e._k(a.keyCode,"enter",13,a.key,"Enter"))return null;e.onCardClick(t)},function(a){if(!("button"in a)&&e._k(a.keyCode,"up",38,a.key,"ArrowUp"))return null;e.moveCardFocus(t,-1,0)},function(a){if(!("button"in a)&&e._k(a.keyCode,"down",40,a.key,"ArrowDown"))return null;e.moveCardFocus(t,1,0)},function(a){return"button"in a||!e._k(a.keyCode,"left",37,a.key,"ArrowLeft")?"button"in a&&0!==a.button?null:void e.moveCardFocus(t,0,-1):null},function(a){return"button"in a||!e._k(a.keyCode,"right",39,a.key,"ArrowRight")?"button"in a&&2!==a.button?null:void e.moveCardFocus(t,0,1):null}]}},[a("div",{staticClass:"card__inner",attrs:{tabindex:"0"}},[a("img",{staticClass:"card__frontside",attrs:{src:"static/cards/"+t.name+".png",alt:t.flipped?"карта "+t.name+", лицевая сторона":""}}),e._v(" "),a("img",{staticClass:"card__backside",attrs:{src:"static/cards/backside.png",alt:t.flipped?"":"рубашка карты"}})])])}))},staticRenderFns:[]};var D={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"animation"},[t("img",{ref:"image",staticClass:"animation__image",style:{height:this.animation.height+"px",width:this.animation.width+"px"},attrs:{src:"static/cards/"+this.animation.card.name+".png",alt:"карта "+this.animation.card.name+", с анимацией исчезновения"}})])},staticRenderFns:[]};function M(e){return new g.a(function(t){return setTimeout(t,e)})}var L={name:"game-page",components:{GamePageMenu:h,GamePageCards:a("VU/8")(N,$,!1,function(e){a("sNGd")},"data-v-cee60728",null).exports,GamePageCardDisappearAnimation:a("VU/8")({name:"game-page-card-disappear-animation",props:["animation"],mounted:function(){this.$el.style.setProperty("--animation-start-top",this.animation.top+"px"),this.$el.style.setProperty("--animation-start-right",this.animation.right+"px"),this.$refs.image.classList.add("animation__image")}},D,!1,function(e){a("ps6J")},"data-v-417c913e",null).exports},props:["moveToResultPage"],data:function(){return{gameId:0,game:null,cards:null,scoreDelayed:null,firstFlippedCard:null,cardDisappearAnimations:[]}},mounted:function(){var e=this;this.startNewGame(),this.$nextTick(function(){return e.onResize()}),window.addEventListener("resize",this.onResize)},beforeDestroy:function(){window.removeEventListener("resize",this.onResize)},methods:{startNewGame:function(){var e=this;return p()(d.a.mark(function t(){var a,n,r,s,i,o;return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=++e.gameId,e.game=new T,e.cards=e.game.cards.map(function(e,t){return{index:t,name:e,flipped:!0,associated:!1}}),e.scoreDelayed=0,e.firstFlippedCard=null,e.cardDisappearAnimations=[],t.next=8,M(5e3);case 8:if(a!==e.gameId){t.next=28;break}for(n=!0,r=!1,s=void 0,t.prev=12,i=l()(e.cards);!(n=(o=i.next()).done);n=!0)o.value.flipped=!1;t.next=20;break;case 16:t.prev=16,t.t0=t.catch(12),r=!0,s=t.t0;case 20:t.prev=20,t.prev=21,!n&&i.return&&i.return();case 23:if(t.prev=23,!r){t.next=26;break}throw s;case 26:return t.finish(23);case 27:return t.finish(20);case 28:case"end":return t.stop()}},t,e,[[12,16,20,28],[21,,23,27]])}))()},onResize:function(){var e=document.documentElement.clientWidth,t=document.documentElement.clientHeight,a=.6*e,n=.8*t,r=.03*Math.min(e,t),s=Math.min((a-r*(A-1))/A/226,(n-r*(R-1))/R/314);this.$refs.cards&&this.$refs.cards.$el.style.setProperty("--card-scale",s)},onCardClick:function(e){var t=this;return p()(d.a.mark(function a(){var n,r,s,i,o;return d.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!e.flipped&&!e.associated){a.next=2;break}return a.abrupt("return");case 2:if(e.flipped=!0,null!==t.firstFlippedCard){a.next=6;break}return t.firstFlippedCard=e,a.abrupt("return");case 6:return n=t.firstFlippedCard,t.firstFlippedCard=null,r=t.game.score,s=t.gameId,a.next=12,M(600);case 12:if(i=t.game.flipPair(e.index,n.index),o=t.game.score-r,!i){a.next=19;break}return a.next=17,t.disappearCardPair(e,n);case 17:a.next=21;break;case 19:return a.next=21,t.flipCardPair(e,n);case 21:s===t.gameId&&(t.scoreDelayed+=o);case 22:case"end":return a.stop()}},a,t)}))()},flipCardPair:function(e,t){var a=this;return p()(d.a.mark(function n(){return d.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,M(500);case 2:e.flipped=t.flipped=!1;case 3:case"end":return a.stop()}},n,a)}))()},disappearCardPair:function(e,t){var a=this;return p()(d.a.mark(function n(){return d.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,M(100);case 2:return e.associated=t.associated=!0,e.flipped=t.flipped=!1,a.disappearCard(e),a.disappearCard(t),n.next=8,M(800);case 8:a.game.isGameEnd()&&a.moveToResultPage(a.game.score);case 9:case"end":return n.stop()}},n,a)}))()},disappearCard:function(e){var t=this.$refs.cards.$el.children[e.index].getBoundingClientRect(),a=this.$el.getBoundingClientRect(),n={card:e,top:t.top-a.top,right:a.right-t.right,height:t.height,width:t.width};this.cardDisappearAnimations.push(n)},onButtonNewGameClick:function(e){e.target.blur(),this.startNewGame()}}},B={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.game?a("div",{staticClass:"game-page"},[a("game-page-menu",e._b({ref:"menu",staticClass:"game-page__menu"},"game-page-menu",{score:e.scoreDelayed,onButtonNewGameClick:e.onButtonNewGameClick},!1)),e._v(" "),a("game-page-cards",e._b({ref:"cards",staticClass:"game-page__cards"},"game-page-cards",{cards:e.cards,onCardClick:e.onCardClick},!1)),e._v(" "),e._l(e.cardDisappearAnimations,function(e){return a("game-page-card-disappear-animation",{key:e.card.index,staticClass:"game-page__card-disappear-animation",attrs:{animation:e}})})],2):e._e()},staticRenderFns:[]};var S=a("VU/8")(L,B,!1,function(e){a("sd8i")},"data-v-02111398",null).exports,U={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"result-page"},[a("img",{staticClass:"result-page__image responsive-image",attrs:{src:"static/images/EndGame.png",srcset:"static/images/EndGame.png 508w, static/images/EndGame@2x.png 1016w",sizes:"40vw",alt:"картинка из четырёх карт (лицевой стороной)"}}),e._v(" "),a("h1",{staticClass:"result-page__header header"},[e._v("\n    Поздравляем!"),a("br"),e._v("\n    Ваш итоговый счёт: "+e._s(e.score)+"\n  ")]),e._v(" "),a("button",{staticClass:"result-page__button-new-game button",attrs:{"data-tid":"EndGame-retryGame"},on:{click:e.onButtonRetryGameClick}},[e._v("\n    Ещё раз\n  ")])])},staticRenderFns:[]};var I=a("VU/8")({name:"result-page",props:["score","moveToGamePage"],methods:{onButtonRetryGameClick:function(e){e.target.blur(),this.moveToGamePage()}}},U,!1,function(e){a("a3qy")},"data-v-88f37b94",null).exports,z={name:"placeholder-for-preloading-images-and-font",data:function(){return{allCards:F}}},V={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"placeholder"},[a("div",{staticClass:"placeholder__krungthep-font"},[e._v("0123456789-")]),e._v(" "),a("div",{staticClass:"placeholder__open-sans-font-bold"},[e._v("Очки")]),e._v(" "),e._l(e.allCards,function(e){return a("img",{staticClass:"placeholder__image",attrs:{src:"static/cards/"+e+".png"}})}),e._v(" "),a("img",{staticClass:"placeholder__image",attrs:{src:"static/cards/backside.png"}}),e._v(" "),a("img",{staticClass:"placeholder__image",attrs:{src:"static/images/EndGame.png",srcset:"static/images/EndGame.png 508w, static/images/EndGame@2x.png 1016w",sizes:"40vw"}})],2)},staticRenderFns:[]};var J=a("VU/8")(z,V,!1,function(e){a("XYtm")},"data-v-1ceafd66",null).exports,K=s()({INTRO:0,GAME:1,RESULT:2}),O={name:"App",components:{PlaceholderForPreloadingImagesAndFont:J,ResultPage:I,GamePage:S,IntroPage:o},data:function(){return{state:K.INTRO,score:null,State:K}},methods:{moveToGamePage:function(){this.state=K.GAME},moveToResultPage:function(e){this.score=e,this.state=K.RESULT}}},H={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app","data-tid":"App"}},[e.state===e.State.INTRO?a("intro-page",{attrs:{moveToGamePage:e.moveToGamePage}}):e._e(),e._v(" "),e.state===e.State.GAME?a("game-page",{attrs:{moveToResultPage:e.moveToResultPage}}):e._e(),e._v(" "),e.state===e.State.RESULT?a("result-page",{attrs:{score:e.score,moveToGamePage:e.moveToGamePage}}):e._e(),e._v(" "),a("placeholder-for-preloading-images-and-font")],1)},staticRenderFns:[]};var W=a("VU/8")(O,H,!1,function(e){a("nLeR")},null,null).exports;a("uMhA");n.a.config.productionTip=!1,new n.a({el:"#app",render:function(e){return e(W)}})},XYtm:function(e,t){},a3qy:function(e,t){},fN7u:function(e,t){},nLeR:function(e,t){},ps6J:function(e,t){},sNGd:function(e,t){},sd8i:function(e,t){},uMhA:function(e,t){}},["NHnr"]);